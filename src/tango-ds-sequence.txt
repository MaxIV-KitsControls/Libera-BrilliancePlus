
Copyright (c) 2012 Instrumentation Technologies
All Rights Reserved.

$Id: tango-ds-sequence.txt 18408 2013-01-07 14:40:47Z tomaz.beltram $

Sequence diagram can be generated from this text file using PlantUML avalable from:
http://sourceforge.net/projects/plantuml/files/plantuml.jar/download

java -jar plantuml.jar tango-ds-sequence.txt

@startuml

title Sequence diagram of Libera Tango Device Server objects

== init_device ==

tango_db <- LiberaBrilliancePlus : get_device_property
LiberaBrilliancePlus -> LiberaClient : Create

loop All attribute and signal nodes
  LiberaBrilliancePlus -> LiberaClient : AddScalar
  LiberaClient -> LiberaAttr : Create
  LiberaBrilliancePlus -> LiberaClient : AddSignal
  LiberaClient -> LiberaSignal : Create
end

LiberaBrilliancePlus -> LiberaClient : Connect

loop All configured signals
  LiberaClient -> LiberaSignal : Initialize
  LiberaSignal -> Signal : Open
end

LiberaBrilliancePlus <-- LiberaClient : set_state(ON)

== operating in state ON ==

par Attribute update thread
  LiberaClient -> LiberaAttr : Read
  LiberaClient <-- LiberaAttr : data value
  note right : atribute pointer is directly updated
else Signal reading thread
  LiberaSignal -> Signal : Read
  LiberaSignal <-- Signal : data buffer
  note left : changes are kept in signal buffer
else allways_executed_hook call
  LiberaBrilliancePlus -> LiberaSignal : GetData
  LiberaBrilliancePlus <-- LiberaSignal : data value arrays
end

@enduml